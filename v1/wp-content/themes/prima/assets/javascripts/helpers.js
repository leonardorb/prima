// Generated by CoffeeScript 1.6.3
(function() {
  Handlebars.registerHelper('strToHtml', function(str) {
    return new Handlebars.SafeString(str);
  });

  Handlebars.registerHelper('pluralize', function(value, single, multiple) {
    if (value <= 1) {
      return "" + value + " " + single;
    }
    return "" + value + " " + multiple;
  });

  Handlebars.registerHelper('srtftime', function(date, format) {
    if (!_.isDate(date)) {
      date = new Date(Date(date));
    }
    return date.format(format);
  });

  Handlebars.registerHelper('isCommentParent', function(comment, options) {
    if (comment.parent === 0) {
      return options.fn(comment);
    }
  });

  Handlebars.registerHelper('isAdminComment', function(comment, options) {
    if ((comment.author != null) && comment.author.id === 1) {
      return options.fn(true);
    }
  });

  Handlebars.registerHelper('getChilds', function(parentComment, comments, options) {
    var childs, commentsHTML;
    commentsHTML = '';
    childs = _.each(comments, function(comment) {
      var isAdminComment;
      if (comment.parent === parentComment.id) {
        isAdminComment = comment.author.id === 1;
        commentsHTML += '<div class="comment-child';
        if (isAdminComment) {
          commentsHTML += ' comment-admin">';
        } else {
          commentsHTML += '">';
        }
        commentsHTML += '<p>' + comment.author.name + '</p>';
        commentsHTML += comment.content;
        return commentsHTML += '</div>';
      }
    });
    return new Handlebars.SafeString(commentsHTML);
  });

}).call(this);

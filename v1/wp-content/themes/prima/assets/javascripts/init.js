// Generated by CoffeeScript 1.6.3
(function() {
  var global,
    _this = this;

  global = this;

  global.Prima = {};

  Prima.Modules = {};

  Prima.Models = {};

  Prima.Collections = {};

  Prima.Views = {};

  Prima.Routers = {};

  Prima.Utilities = {};

  Prima.App = new Backbone.Marionette.Application();

  Prima.BaseURL = location.host === 'localhost' ? '/leonardorb.net/website/v1/' : '/';

  Prima.CurrentURL = location.pathname;

  Prima.App.addRegions({
    sidebar: '.sidebar',
    main: '.main'
  });

  $(document).ready(function() {
    Prima.App.on('initialize:after', function() {
      var postHash, postName, sidebarView;
      sidebarView = new Prima.Views.Sidebar();
      Prima.App.sidebar.show(sidebarView);
      if (Backbone.history != null) {
        Backbone.history.start({
          pushState: true,
          root: Prima.BaseURL
        });
        if (Prima.BaseURL === '/') {
          postName = Prima.CurrentURL.split('/')[1];
        } else {
          postName = Prima.CurrentURL.split('/')[4];
        }
        postHash = location.hash;
        if (postName != null) {
          return Backbone.history.navigate(postName + '/' + postHash, {
            trigger: true
          });
        } else {
          return Backbone.history.navigate('', {
            trigger: true
          });
        }
      }
    });
    Prima.App.start();
    return _this.notification = new Prima.Utilities.Notification();
  });

}).call(this);
